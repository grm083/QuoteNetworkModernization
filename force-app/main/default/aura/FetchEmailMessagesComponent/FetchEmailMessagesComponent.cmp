<aura:component controller="FetchEmailMessages" implements="force:appHostable,flexipage:availableForAllPageTypes,flexipage:availableForRecordHome,force:hasRecordId,forceCommunity:availableForAllPageTypes">
    <aura:handler name="init" value="{!this}" action="{!c.doInit}"/>
    <aura:attribute name="data" type="List" default="[]"/> 
    <aura:attribute name="columns" type="List"/>
    <aura:attribute name="enableInfiniteLoading" type="Boolean" default="true"/>
    <aura:attribute name="initialRows" type="Integer" default="20"/>
    <aura:attribute name="rowsToLoad" type="Integer" default="50"/>
    <aura:attribute name="loadMoreOffset" type="Integer" default="20"/>
    <aura:attribute name="FromDate" type="String" />
    <aura:attribute name="ToDate" type="String" />
    <aura:attribute name="totalNumberOfRows" type="Integer" default="300"/>
    <aura:attribute name="loadMoreStatus" type="String" default=""/>
    <aura:attribute name="spinner" type="Boolean"/>
    <aura:attribute name="searchKeyword" type="String" description="use for store user search input" default=""/>
    <aura:attribute name="subject" type="String" description="use for store user search input" default=""/>
    <aura:attribute name="Message" type="boolean" default="false" description="use for display no record found message"/>
    <aura:attribute name="TotalNumberOfRecord" type="integer" default="0" description="use for display Number of records"/>
    <lightning:spinner variant="brand" size="large" aura:id="Id_spinner" class="slds-hide" /> 
    <lightning:workspaceAPI aura:id="workspace" />
    <aura:if isTrue="{!v.spinner}">
        <div class="demo-only">
            <div role="status" class="slds-spinner slds-spinner_medium slds-spinner_brand">
                <span class="slds-assistive-text">Loading</span>
                <div class="slds-spinner__dot-a"></div>
                <div class="slds-spinner__dot-b"></div>
            </div>
        </div>
    </aura:if>
    
    <lightning:layout>
        <lightning:layoutItem class="slds-size_2-of-12 slds-p-bottom_large slds-p-right_x-small">
            <lightning:input value="{!v.searchKeyword}" class="fontwhite" 
                             placeholder="Search Address.."
                             aura:id="searchField"
							 label="From Address" autocomplete = "false"/>
        </lightning:layoutItem>
        <lightning:layoutItem class="slds-size_2-of-12 slds-p-bottom_large slds-p-right_x-small">
            <lightning:input value="{!v.subject}" class="fontwhite"
                             placeholder="Search Subject.."
                             aura:id="searchFieldSubject"
                             label="Subject" autocomplete = "off"/>
        </lightning:layoutItem>
        
        <lightning:layoutItem class="slds-size_2-of-12" padding="around-small">
            
        </lightning:layoutItem>
        
        <lightning:layoutItem class="slds-size_2-of-12 slds-p-bottom_large slds-p-right_x-small">
            <lightning:input type="Date" value="{!v.FromDate}" class="fontwhiteDate" 
                             placeholder="From Date.."
                             aura:id="searchFieldFrom"
                             label="Message From Date"/>
        </lightning:layoutItem>
        <lightning:layoutItem class="slds-size_2-of-12 slds-p-bottom_large slds-p-right_x-small">
            <lightning:input type="Date" value="{!v.ToDate}" class="fontwhiteDate" 
                             placeholder="To Date.."
                             aura:id="searchFieldTo"
                             label="Message To Date"/>
        </lightning:layoutItem>
        <lightning:layoutItem class="slds-size_1-of-12" padding="around-small">
            
        </lightning:layoutItem>
        <lightning:layoutItem class="slds-size_1-of-12 slds-p-top_large ">
            <lightning:button class="customButton" onclick="{!c.Search}"
                              variant="brand"
                              label="Search"
                              iconName="utility:search"/> 
        </lightning:layoutItem>
    </lightning:layout>
    
    <!-- TOTAL RECORDS BADGES--> 
    
    <!-- ERROR MESSAGE IF NOT RECORDS FOUND--> 
    <aura:if isTrue="{!v.Message}">
        <div class="slds-notify_container slds-is-relative">
            <div class="slds-notify slds-notify_toast slds-theme_error" role="alert">
                <div class="slds-notify__content">
                    <h2 class="slds-text-heading_small">No Records Found...</h2>
                </div>
            </div>
        </div>
    </aura:if>
    <div class="slds-box" style="background-color:white;">
    <div style="height: 560px">
        <lightning:datatable
                             columns="{! v.columns }"
                             data="{! v.data }"
                             keyField="id"
                             hideCheckboxColumn="true"
                             showRowNumberColumn="false"
                             enableInfiniteLoading="{! v.enableInfiniteLoading }"
                             loadMoreOffset="{! v.loadMoreOffset }"
                             onloadmore="{! c.loadMoreData }"/>
        </div>
        
        </div>
  		<div class="slds-p-around_xxx-small slds-align_absolute-center">
        {! v.loadMoreStatus }
        </div>      
    
</aura:component>