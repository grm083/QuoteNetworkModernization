<aura:component controller ="BR_RelatedListController" implements="force:appHostable,flexipage:availableForAllPageTypes,flexipage:availableForRecordHome,force:hasRecordId" access="global" >
    <!-- attributes -->
    <aura:attribute name="data" type="Object"/>
    <aura:attribute type="Business_Rule__c[]" name="brRecList"/>
    <aura:attribute name="columns" type="List"/>
    <aura:attribute name="recordCount" type="Integer"/>
    <aura:attribute name="recordId" type="String" />
    <aura:attribute name="showSpinner" type="boolean" default="false"/>
    <aura:attribute name="showDataTable" type="boolean" default="false"/>
    <aura:handler name="init" value="{!this}" action="{!c.doInit}"/>
    <!--lightning:workspaceAPI aura:id="workspace" /!-->	
    <aura:handler event="lightning:tabRefreshed" action="{!c.doInit }"/> 
    <aura:handler event="force:refreshView" action="{!c.doInit}" />
    
    <!-- UI-->
    <article class="slds-card">
        <div class="slds-card__header slds-grid">
            <header class="slds-media slds-media_center slds-has-flexi-truncate">
                <div class="slds-media__figure">
                    
                    <lightning:icon iconName="custom:custom37" size="Small"  title="Business Rules" />
                    <!--svg class="slds-icon slds-icon_small" aria-hidden="true">
<use xlink:href="/assets/icons/standard-sprite/svg/symbols.svg#contact"></use>
</svg-->
                    <span class="slds-assistive-text"></span>
                </div>
                <div class="slds-media__body">
                    <div class="slds-m-right_small">
                    </div>
                    <h2 class="slds-card__header-title">
                        <!--a href="#" class="slds-card__header-link slds-truncate" title="Card Header"!-->
                        <span> Location Business Rules ({!v.recordCount})</span>
                        <!--/a-->
                    </h2>
                </div>
                <div class="slds-no-flex">
                    <lightning:buttonIcon class="slds-float_right" iconName="utility:refresh"  alternativeText="Refresh" title="Refresh" onclick="{!c.doInit }"/>
                </div>
            </header>
        </div>
        <div class="slds-card__body">
            <aura:if isTrue="{!v.showSpinner}">
                <div class="slds-spinner--brand  slds-spinner spinnerCss">
                    <lightning:spinner alternativeText="Loading" size="medium" />
                </div>
            </aura:if>
            <aura:if isTrue="{!v.showDataTable}">
                <lightning:datatable
                                     keyField="id"
                                     data="{!v.brRecList }"
                                     columns="{!v.columns }"
                                     hideCheckboxColumn="true"/>
            </aura:if>
        </div>
        <footer class="slds-card__footer"></footer>
    </article>
    <!-- the container element determine the height of the datatable -->
</aura:component>