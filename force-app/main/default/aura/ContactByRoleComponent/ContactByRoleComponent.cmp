<aura:component controller="ContactByRoleHelper" implements="force:appHostable,flexipage:availableForAllPageTypes,flexipage:availableForRecordHome,force:hasRecordId,forceCommunity:availableForAllPageTypes,force:lightningQuickAction" access="global"> 
    <aura:attribute name="recordId" type="string" />
    <aura:attribute name="activeSections" type="List" default="" />
    <aura:attribute name="activeSectionsMessage" type="String" default="" />
    <aura:attribute name="levelList" type="object" />
    <aura:attribute name="showError" type="Boolean" default="false"/>
    <aura:attribute name="isCommEnable" type="Boolean" default="false"/>
    <aura:handler name="init" value="{!this}" action="{!c.doInit}"/>
    
    <div class="slds">
        <div class="slds-grid slds-wrap">
            <div class="slds-col slds-size_1-of-1" style="padding:10px">
				<aura:if isTrue="{!!v.isCommEnable}">                
                <aura:if isTrue="{!v.showError}">
                    <!--<div class="slds-notify_container slds-is-relative">
                        <div class="slds-notify slds-notify_toast slds-theme_error" role="alert">
                            <div class="slds-notify__content">
                                <h2 class="slds-text-heading_small">No Records Found...</h2>
                            </div>
                        </div>
                    </div>-->
                    <div class="slds-text-heading_medium slds-text-color_error slds-text-align_center">No Records Found...
                    </div>
                </aura:if>
                 <aura:if isTrue="{! !v.showError}">
                    <ui:scrollerWrapper class="scrollerSize">
                        <table aria-multiselectable="true" class="slds-table slds-table_cell-buffer slds-no-row-hover slds-table_bordered slds-table_col-bordered slds-table_fixed" >
                            <thead>
                                <tr class="slds-text-title_caps" style="text-align:center">
                                    <th style="text-align:center">
                                        <div class="slds-truncate" title="Name">Role</div>
                                    </th>
                                    <th style="text-align:center">
                                        <div class="slds-truncate" title="Name">Contact Name</div>
                                    </th>
                                    <th style="text-align:center" >
                                        <div class="slds-wrap" title="Phone">Phone</div>
                                    </th>
                                    <th style="text-align:center">
                                        <div class="slds-wrap" title="Mobile Phone">Mobile Phone</div>
                                    </th>
                                    <th style="text-align:center">
                                        <div class="slds-wrap" title="Email">Email</div>
                                    </th>
                                    <th style="text-align:center">
                                        <div class="slds-wrap" title="Type">Preferred</div>
                                        <div class="slds-wrap" title="Type">Method of</div>
                                        <div class="slds-wrap" title="Type">Contact</div>
                                    </th>                                                              
                                </tr>
                            </thead>
                            <tbody>
                                
                                <aura:iteration items="{!v.levelList}" var="level" indexVar="index">
                                    
                                    <tr> 
                                        <td colspan="5" class="tdRoleStyle">
                                            <div class="slds-truncate">{!level.levelName}</div>
                                        </td>
                                    </tr>
                                    <aura:iteration items="{!level.roles}" var="conRole" indexVar="indexy">
                                        <aura:iteration items="{!conRole.conList}" var="con">
                                            <tr> 
                                                <td>
                                                    <div>{!con.role}</div>
                                                </td>
                                                <td>
                                                    <div class="slds-truncate"><a href="javascript:void(0)" onclick="{!c.openContact}" data-index ="{!index}" data-id="{!con.conId}">{!con.conName}</a></div>
                                                </td>
                                                <td>
                                                    <div class="slds-truncate" ><lightning:formattedPhone value="{!con.conPhone}"/></div>
                                                </td>
                                                <td>
                                                    <div class="slds-truncate" ><lightning:formattedPhone value="{!con.conMobilePhone}"/></div>
                                                </td>
                                                <td>
                                                    <div class="slds-truncate" ><lightning:formattedEmail value="{!con.conEmail}"/> 
                                                        <!--<a href="javascript:void(0)" onclick="{!c.selectUpdateCaseAction}" data-index ="{!index}" data-id="{!con.conEmail}">{!con.conEmail}</a> -->
                                                    </div>
                                                </td>
                                                <td >
                                                    <div class="slds-wrap" ><lightning:formattedText value="{!con.preferredMethod}"/></div>
                                                </td>
                                            </tr>
                                        </aura:iteration>
                                    </aura:iteration>
                                </aura:iteration>
                            </tbody>
                        </table>
                    </ui:scrollerWrapper>
                </aura:if>
                    </aura:if>
                <aura:if isTrue="{!v.isCommEnable}">
                    <c:maintainVendorEscalationCom recordId= "{!v.recordId}"/>
                  </aura:if>  
            </div>
        </div>
    </div>
    
    
</aura:component>