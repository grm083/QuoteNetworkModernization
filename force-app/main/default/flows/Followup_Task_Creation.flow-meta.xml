<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <actionCalls>
        <name>Get_Business_Hours_for_Due_Date_Time</name>
        <label>Get Business Hours for Due Date Time</label>
        <locationX>296</locationX>
        <locationY>622</locationY>
        <actionName>GetBusinessDelayTime</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>If_Notify_Customer_of_Delay_Update_PropServiceDate</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>rec</name>
            <value>
                <elementReference>varActualBaseTime</elementReference>
            </value>
        </inputParameters>
        <outputParameters>
            <assignToReference>varDueDateTimeBusinessHours</assignToReference>
            <name>output</name>
        </outputParameters>
    </actionCalls>
    <actionCalls>
        <name>SendEmailforNCD</name>
        <label>SendEmailforNCD</label>
        <locationX>1015</locationX>
        <locationY>522</locationY>
        <actionName>SendEmailForNotifyCustomerDelayTask</actionName>
        <actionType>apex</actionType>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>CaseList</name>
            <value>
                <elementReference>CaseRecord.Id</elementReference>
            </value>
        </inputParameters>
    </actionCalls>
    <apiVersion>49.0</apiVersion>
    <assignments>
        <name>Assign_Accepted_WO</name>
        <label>Assign Accepted WO</label>
        <locationX>384</locationX>
        <locationY>305</locationY>
        <assignmentItems>
            <assignToReference>varAccountNumber</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>CaseRecord.Parent.Work_Order__r.Account_Number__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varEffectiveDate</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>CaseRecord.Parent.Work_Order__r.Effective_Date__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varRescheduleDate</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>CaseRecord.Parent.Work_Order__r.Rescheduled_Date__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varSubject</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>CaseRecord.Case_Sub_Status__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varProposedServiceDate</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>varCaseProposedServiceDateVal</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varWoAcceptedComments</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>CaseRecord.Parent.Work_Order__r.WO_Accepted_Rejected_Comments__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Assign_FollowUp_Task</targetReference>
        </connector>
    </assignments>
    <assignments>
        <description>Assign Case contact details to task</description>
        <name>Assign_Case_Contact</name>
        <label>Assign Case Contact</label>
        <locationX>885</locationX>
        <locationY>948</locationY>
        <assignmentItems>
            <assignToReference>varContactEmail</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>CaseRecord.ContactEmail</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varContactNumber</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>CaseRecord.ContactPhone</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varContactId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>CaseRecord.ContactId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varContactTitle</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>CaseRecord.Contact_Title__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Assign_Task_Owner</targetReference>
        </connector>
    </assignments>
    <assignments>
        <description>FollowUp Task Assignment</description>
        <name>Assign_FollowUp_Task</name>
        <label>Assign FollowUp Task</label>
        <locationX>493</locationX>
        <locationY>237</locationY>
        <assignmentItems>
            <assignToReference>FollowUpTaskOutput.ActivityDate</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Flow.CurrentDateTime</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>FollowUpTaskOutput.Attempt__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>varNumberOfAttempt</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>FollowUpTaskOutput.Contact_Email__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>varContactEmail</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>FollowUpTaskOutput.Contact_Number__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>varContactNumber</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>FollowUpTaskOutput.Contact_Title__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>varContactTitle</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>FollowUpTaskOutput.Description__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>varDescription</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>FollowUpTaskOutput.Due_Date_Time__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>varDueDateTimeBusinessHours</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>FollowUpTaskOutput.Outcome__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>TaskMetadataInput.Outcome_Parameter__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>FollowUpTaskOutput.OwnerId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>varTaskOwnerId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>FollowUpTaskOutput.Process__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>varProcess</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>FollowUpTaskOutput.Proposed_Service_Date__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>varProposedServiceDate</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>FollowUpTaskOutput.RecordTypeId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>varTaskRecordTypeId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>FollowUpTaskOutput.Subject</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>varSubject</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>FollowUpTaskOutput.WhatId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>varCaseId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>FollowUpTaskOutput.WhoId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>varContactId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>FollowUpTaskOutput.PurchaseOrder_Number__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>CaseRecord.PurchaseOrder_Number__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>FollowUpTaskOutput.Profile_Number__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>CaseRecord.Profile_Number__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>FollowUpTaskOutput.Is_Genesys_User__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>varIsGenesysUser</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>FollowUpTaskOutput.Account_Number__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>varAccountNumber</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>FollowUpTaskOutput.Effective_Date__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>varEffectiveDate</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>FollowUpTaskOutput.Reschedule_Date__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>varRescheduleDate</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>FollowUpTaskOutput.WO_Accepted_Comments__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Truncated_WO_Accepted_Rejected_Comments</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>FollowUpTaskOutput.Source_System__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>varSourceSystem</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>FollowUpTaskOutput.Case_Created_By__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>varCaseCreatedBy</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>FollowUpTaskOutput.isSystemGenerated__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>To_check_varLastTaskRecord</targetReference>
        </connector>
    </assignments>
    <assignments>
        <description>Assign Location contact details</description>
        <name>Assign_Location_Contact</name>
        <label>Assign Location Contact</label>
        <locationX>619</locationX>
        <locationY>868</locationY>
        <assignmentItems>
            <assignToReference>varContactEmail</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>AccountLocationRecord.Email__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varContactNumber</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>AccountLocationRecord.Phone</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varContactId</assignToReference>
            <operator>Assign</operator>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varContactTitle</assignToReference>
            <operator>Assign</operator>
        </assignmentItems>
        <connector>
            <targetReference>Assign_Task_Owner</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Manually_Dispatch</name>
        <label>Assign Manually Dispatch</label>
        <locationX>135</locationX>
        <locationY>319</locationY>
        <assignmentItems>
            <assignToReference>varSourceSystem</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>CaseRecord.Source_System__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Assign_FollowUp_Task</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_MulticaseId_for_Followup</name>
        <label>Assign MulticaseId for Followup</label>
        <locationX>974</locationX>
        <locationY>247</locationY>
        <assignmentItems>
            <assignToReference>FollowUpTaskOutput.MultiCaseId__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>varMulticaseId</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>FollowUp_Task</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Proposed_Service_Date_Value</name>
        <label>Assign Proposed Service Date Value</label>
        <locationX>229</locationX>
        <locationY>225</locationY>
        <assignmentItems>
            <assignToReference>varProposedServiceDate</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>varCaseProposedServiceDateVal</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Assign_FollowUp_Task</targetReference>
        </connector>
    </assignments>
    <assignments>
        <description>Assignment of Vendor contact details</description>
        <name>Assign_Vendor_Contact_Details</name>
        <label>Assign Vendor Contact Details</label>
        <locationX>304</locationX>
        <locationY>731</locationY>
        <assignmentItems>
            <assignToReference>varContactId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>FetchedVendorContact.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varContactNumber</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>FetchedVendorContact.Phone</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varContactEmail</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>FetchedVendorContact.Email</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varContactTitle</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>FetchedVendorContact.Tech_Contact_Account_Title__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Assign_Task_Owner</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Update_Number_of_Attempt</name>
        <label>Update Number of Attempt</label>
        <locationX>51</locationX>
        <locationY>712</locationY>
        <assignmentItems>
            <assignToReference>varNumberOfAttempt</assignToReference>
            <operator>Add</operator>
            <value>
                <numberValue>1.0</numberValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_Account_location</targetReference>
        </connector>
    </assignments>
    <constants>
        <name>varCSRPROFILE</name>
        <dataType>String</dataType>
        <value>
            <stringValue>Customer Service</stringValue>
        </value>
    </constants>
    <constants>
        <name>varINFORMATIONNOTOBTAINED</name>
        <dataType>String</dataType>
        <value>
            <stringValue>Information Not Obtained</stringValue>
        </value>
    </constants>
    <constants>
        <name>varOUTCOMENORESPONSE</name>
        <dataType>String</dataType>
        <value>
            <stringValue>No Response/Pending Response</stringValue>
        </value>
    </constants>
    <constants>
        <name>varOUTCOMESR</name>
        <dataType>String</dataType>
        <value>
            <stringValue>Service Rescheduled</stringValue>
        </value>
    </constants>
    <constants>
        <name>varPROCESSCUSTOMEROBTAIN</name>
        <dataType>String</dataType>
        <value>
            <stringValue>Obtain Customer Info</stringValue>
        </value>
    </constants>
    <constants>
        <name>varPROCESSCVA</name>
        <dataType>String</dataType>
        <value>
            <stringValue>Confirm Vendor Availability</stringValue>
        </value>
    </constants>
    <constants>
        <name>varPROCESSESCALATIONCVA</name>
        <dataType>String</dataType>
        <value>
            <stringValue>Escalation Confirm Vendor Availability</stringValue>
        </value>
    </constants>
    <constants>
        <name>varPROCESSNCD</name>
        <dataType>String</dataType>
        <value>
            <stringValue>Notify Customer of Decline</stringValue>
        </value>
    </constants>
    <constants>
        <name>varPROCESSNotifyCustomer</name>
        <dataType>String</dataType>
        <value>
            <stringValue>Notify Customer of Service Update</stringValue>
        </value>
    </constants>
    <constants>
        <name>varSOURCECASE</name>
        <dataType>String</dataType>
        <value>
            <stringValue>Case</stringValue>
        </value>
    </constants>
    <constants>
        <name>varSOURCETASK</name>
        <dataType>String</dataType>
        <value>
            <stringValue>Task</stringValue>
        </value>
    </constants>
    <constants>
        <name>varSTATUS</name>
        <dataType>String</dataType>
        <value>
            <stringValue>Closed</stringValue>
        </value>
    </constants>
    <constants>
        <name>varSUBSTATUS</name>
        <dataType>String</dataType>
        <value>
            <stringValue>Request Not Approved</stringValue>
        </value>
    </constants>
    <decisions>
        <name>Check_IsStop</name>
        <label>Check IsStop</label>
        <locationX>606</locationX>
        <locationY>630</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Check_IsStop_is_True</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>varIsStopBoolean</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Business_Hours_for_Due_Date_Time</targetReference>
            </connector>
            <label>Check IsStop is True</label>
        </rules>
    </decisions>
    <decisions>
        <description>When Process is &quot;Confirm Service Completion with Location&quot; execute this flow otherwise default outcome.</description>
        <name>Confirm_Service_Completion_with_Location</name>
        <label>Confirm Service Completion with Location</label>
        <locationX>294</locationX>
        <locationY>912</locationY>
        <defaultConnector>
            <targetReference>Assign_Task_Owner</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>If_confirm_service_with_Location</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>varProcess</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Confirm Service Completion with Location</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>FetchCustomerContact</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Location_Contact</targetReference>
            </connector>
            <label>If confirm service with Location</label>
        </rules>
        <rules>
            <name>If_Notify_Customer_of_Service_Update</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>varProcess</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>varPROCESSNotifyCustomer</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>FetchCustomerContact</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Case_Contact</targetReference>
            </connector>
            <label>If Notify Customer of Service Update</label>
        </rules>
        <rules>
            <name>If_Notify_Customer_Of_Delay</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>varProcess</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Notify Customer Of Delay</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>FetchCustomerContact</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Case_Contact</targetReference>
            </connector>
            <label>If Notify Customer Of Delay</label>
        </rules>
        <rules>
            <name>If_Obtain_Vendor_Information</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>varProcess</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Obtain Vendor Information</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>FetchedVendorContact</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Vendor_Contact_Details</targetReference>
            </connector>
            <label>If Obtain Vendor Information</label>
        </rules>
        <rules>
            <name>If_Manually_Dispatch</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>varProcess</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Manually Dispatch</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>FetchedVendorContact</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Vendor_Contact_Details</targetReference>
            </connector>
            <label>If Manually Dispatch</label>
        </rules>
        <rules>
            <name>If_Obtain_Schedule_Confirmation</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>varProcess</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Obtain Schedule Confirmation</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>FetchedVendorContact</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Vendor_Contact_Details</targetReference>
            </connector>
            <label>If Obtain Schedule Confirmation</label>
        </rules>
        <rules>
            <name>If_Obtain_Service_Confirmation</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>varProcess</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Confirm Service Completion</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>FetchedVendorContact</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Vendor_Contact_Details</targetReference>
            </connector>
            <label>If Obtain Service Confirmation</label>
        </rules>
        <rules>
            <name>If_Confirm_Vendor_Availability</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>varProcess</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Confirm Vendor Availability</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>FetchedVendorContact</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Vendor_Contact_Details</targetReference>
            </connector>
            <label>If Confirm Vendor Availability</label>
        </rules>
        <rules>
            <name>If_Obtain_Vendor_Update</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>varProcess</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Obtain Vendor Update</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>FetchedVendorContact</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Vendor_Contact_Details</targetReference>
            </connector>
            <label>If Obtain Vendor Update</label>
        </rules>
        <rules>
            <name>If_Accepted_Work_Order</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>varProcess</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Accepted WorkOrder</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>FetchedVendorContact</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Vendor_Contact_Details</targetReference>
            </connector>
            <label>If Accepted Work Order</label>
        </rules>
    </decisions>
    <decisions>
        <description>check if task is ncd</description>
        <name>if_NCD_Task</name>
        <label>if NCD Task</label>
        <locationX>833</locationX>
        <locationY>520</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>if_Task_NCD</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>FollowUpTaskOutput.Process__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Notify Customer of Delay</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>SendEmailforNCD</targetReference>
            </connector>
            <label>if Task NCD</label>
        </rules>
    </decisions>
    <decisions>
        <name>If_Notify_Customer_of_Delay_Update_PropServiceDate</name>
        <label>If Notify Customer of Delay Update PropServiceDate</label>
        <locationX>289</locationX>
        <locationY>475</locationY>
        <defaultConnector>
            <targetReference>Assign_FollowUp_Task</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>If_Notify_Customer_of_Delay_Check</name>
            <conditionLogic>(1 OR 2) AND 3</conditionLogic>
            <conditions>
                <leftValueReference>varProcess</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Notify Customer Of Delay</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>varProcess</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Notify Customer of Service Update</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>varCaseProposedServiceDateVal</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Proposed_Service_Date_Value</targetReference>
            </connector>
            <label>If Notify Customer of Delay Check</label>
        </rules>
        <rules>
            <name>Accepted_or_Rejected_WO</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>varProcess</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Accepted WorkOrder</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>varProcess</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Rejected Work Order</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Accepted_WO</targetReference>
            </connector>
            <label>Accepted or Rejected WO</label>
        </rules>
        <rules>
            <name>Manually_Dispatch</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>varProcess</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Manually Dispatch</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Case_Created_by_Name</targetReference>
            </connector>
            <label>Manually Dispatch</label>
        </rules>
    </decisions>
    <decisions>
        <name>To_check_varLastTaskRecord</name>
        <label>To check varLastTaskRecord</label>
        <locationX>683</locationX>
        <locationY>239</locationY>
        <defaultConnector>
            <targetReference>FollowUp_Task</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>varLastTaskRecord_Null_Check</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>varLastTaskRecord</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_MulticaseId_for_Followup</targetReference>
            </connector>
            <label>varLastTaskRecord Null Check</label>
        </rules>
    </decisions>
    <description>To Create Follow Up Task</description>
    <formulas>
        <description>Restricting value of comment to 255 characters.</description>
        <name>Truncated_WO_Accepted_Rejected_Comments</name>
        <dataType>String</dataType>
        <expression>IF(LEN({!varWoAcceptedComments}) &lt; 255, {!varWoAcceptedComments},LEFT({!varWoAcceptedComments},255))</expression>
    </formulas>
    <formulas>
        <name>varActualBaseTime</name>
        <dataType>String</dataType>
        <expression>IF(
{!varProcess} = &apos;Obtain Schedule Confirmation&apos;, 
TEXT({!CaseRecord.Due_Date_Time_for_OSC__c}) &amp; &apos;;&apos;&amp; {!varDueDateTimeDelayCheck},

IF(
{!varProcess} = &apos;Confirm Service Completion&apos;, 
TEXT({!CaseRecord.Due_Date_Time_for_CSC__c}) &amp; &apos;;&apos;&amp; {!varDueDateTimeDelayCheck},

IF(
{!varProcess} =&apos;Confirm Service Completion with Location&apos;,
TEXT({!CaseRecord.Due_Date_Time_for_CSC_Location__c}) &amp; &apos;;&apos;&amp; {!varDueDateTimeDelayCheck},
TEXT({!$Flow.CurrentDateTime}) &amp; &apos;;&apos;&amp; {!varDueDateTimeDelayCheck})))</expression>
    </formulas>
    <formulas>
        <description>Null check due date time delay field which comes from meta data</description>
        <name>varDueDateTimeDelayCheck</name>
        <dataType>String</dataType>
        <expression>IF(NOT(ISBLANK({!varDueDateTimeDelay})),{!varDueDateTimeDelay},&apos;0&apos;)</expression>
    </formulas>
    <formulas>
        <description>Function of a Genesys Routing</description>
        <name>VarFunction</name>
        <dataType>String</dataType>
        <expression>IF({!varProcess} == &apos;Manually Dispatch&apos;, &apos;MAS Dispatch&apos;, &apos;Follow-up&apos;)</expression>
    </formulas>
    <formulas>
        <name>varMulticaseId</name>
        <dataType>String</dataType>
        <expression>If({!varLastTaskRecord.MultiCaseId__c} != null , {!varLastTaskRecord.MultiCaseId__c},&apos;&apos;)</expression>
    </formulas>
    <interviewLabel>Followup Task Creation {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Followup Task Creation</label>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>FREE_FORM_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordCreates>
        <name>FollowUp_Task</name>
        <label>FollowUp Task</label>
        <locationX>684</locationX>
        <locationY>446</locationY>
        <connector>
            <targetReference>if_NCD_Task</targetReference>
        </connector>
        <inputReference>FollowUpTaskOutput</inputReference>
    </recordCreates>
    <recordLookups>
        <name>Get_Account_location</name>
        <label>Get Account location</label>
        <locationX>50</locationX>
        <locationY>911</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Confirm_Service_Completion_with_Location</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>CaseRecord.Location__c</elementReference>
            </value>
        </filters>
        <object>Account</object>
        <outputReference>AccountLocationRecord</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>Customer_Location_Code__c</queriedFields>
        <queriedFields>tz__Timezone__c</queriedFields>
        <queriedFields>Email__c</queriedFields>
        <queriedFields>Phone</queriedFields>
        <queriedFields>Location_Code__c</queriedFields>
        <queriedFields>Start_Time__c</queriedFields>
        <queriedFields>End_Time__c</queriedFields>
    </recordLookups>
    <recordLookups>
        <name>Get_Case_Created_by_Name</name>
        <label>Get Case Created by Name</label>
        <locationX>128</locationX>
        <locationY>462</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Assign_Manually_Dispatch</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>CaseRecord.CreatedById</elementReference>
            </value>
        </filters>
        <object>User</object>
        <outputAssignments>
            <assignToReference>varCaseCreatedBy</assignToReference>
            <field>Name</field>
        </outputAssignments>
    </recordLookups>
    <recordLookups>
        <name>Get_Record_Type</name>
        <label>Get Record Type</label>
        <locationX>53</locationX>
        <locationY>378</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Update_Number_of_Attempt</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>DeveloperName</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Follow_Up</stringValue>
            </value>
        </filters>
        <filters>
            <field>SobjectType</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Task</stringValue>
            </value>
        </filters>
        <object>RecordType</object>
        <outputAssignments>
            <assignToReference>varTaskRecordTypeId</assignToReference>
            <field>Id</field>
        </outputAssignments>
    </recordLookups>
    <start>
        <locationX>105</locationX>
        <locationY>50</locationY>
        <connector>
            <targetReference>Get_Record_Type</targetReference>
        </connector>
    </start>
    <status>Active</status>
    <subflows>
        <name>Assign_Task_Owner</name>
        <label>Assign Task Owner</label>
        <locationX>614</locationX>
        <locationY>739</locationY>
        <connector>
            <targetReference>Check_IsStop</targetReference>
        </connector>
        <flowName>Task_Assignment</flowName>
        <inputAssignments>
            <name>varCaseOwner</name>
            <value>
                <elementReference>CaseRecord.LastModifiedById</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>varCasePropServiceDate</name>
            <value>
                <elementReference>varCaseProposedServiceDateVal</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>varCaseRec</name>
            <value>
                <elementReference>CaseRecord</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>VarCurrentTaskProcess</name>
            <value>
                <elementReference>VarCurrentTaskProcess</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>VarFollowUpRecordTypeId</name>
            <value>
                <elementReference>varTaskRecordTypeId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>varIsNew</name>
            <value>
                <elementReference>varIsNew</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>varLastModifiedId</name>
            <value>
                <elementReference>varLastModifiedId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>varNumberOfAttempts</name>
            <value>
                <elementReference>varNumberOfAttempt</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>varProcess</name>
            <value>
                <elementReference>varProcess</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>varSourceVal</name>
            <value>
                <elementReference>varSourceVal</elementReference>
            </value>
        </inputAssignments>
        <outputAssignments>
            <assignToReference>varIsGenesysUser</assignToReference>
            <name>varIsGenesysUser</name>
        </outputAssignments>
        <outputAssignments>
            <assignToReference>varIsStopBoolean</assignToReference>
            <name>varIsStop</name>
        </outputAssignments>
        <outputAssignments>
            <assignToReference>varTaskOwnerId</assignToReference>
            <name>varTaskOwner</name>
        </outputAssignments>
    </subflows>
    <variables>
        <name>Accountlist</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Account</objectType>
    </variables>
    <variables>
        <name>AccountLocationRecord</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Account</objectType>
    </variables>
    <variables>
        <name>CaseRecord</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>Case</objectType>
    </variables>
    <variables>
        <description>Fetched Customer Contact</description>
        <name>FetchCustomerContact</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>Contact</objectType>
    </variables>
    <variables>
        <description>used to fetch vendor contact</description>
        <name>FetchedVendorContact</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>Contact</objectType>
    </variables>
    <variables>
        <description>FollowUp Task Details</description>
        <name>FollowUpTaskOutput</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
        <objectType>Task</objectType>
    </variables>
    <variables>
        <name>TaskMetadataInput</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
        <objectType>Task_Framework__mdt</objectType>
    </variables>
    <variables>
        <name>varAccountNumber</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varCaseCreatedBy</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <description>case id from the other flow</description>
        <name>varCaseId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varCaseNumber</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varCaseOwnerId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varCaseProposedServiceDateVal</name>
        <dataType>Date</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>varCaseRecordType</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varCaseRecordTypeId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varContactEmail</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varContactId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varContactNumber</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varContactTitle</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <description>Current Process of the Task</description>
        <name>VarCurrentTaskProcess</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varDescription</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <description>Due date time as per business hours</description>
        <name>varDueDateTimeBusinessHours</name>
        <dataType>DateTime</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varDueDateTimeDelay</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varEffectiveDate</name>
        <dataType>Date</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varGenesysRoutingId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varIsGenesysUser</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varIsNew</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varIsStopBoolean</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>varLastAgent</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <description>Task Last Modified by Id</description>
        <name>varLastModifiedId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varLastTask</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>varLastTaskRecord</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>Task</objectType>
    </variables>
    <variables>
        <name>varNumberOfAttempt</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
        <value>
            <numberValue>0.0</numberValue>
        </value>
    </variables>
    <variables>
        <name>varProcess</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varProposedServiceDate</name>
        <dataType>Date</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varRescheduleDate</name>
        <dataType>Date</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varSourceSystem</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varSourceVal</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>varSubject</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <elementReference>varProcess</elementReference>
        </value>
    </variables>
    <variables>
        <name>varTaskDescCode</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>varTaskId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>varTaskOwnerId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>varTaskRecordType</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <value>
            <stringValue>Task;Follow_Up</stringValue>
        </value>
    </variables>
    <variables>
        <name>varTaskRecordTypeId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>varVendorAccountId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varWoAcceptedComments</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
</Flow>
